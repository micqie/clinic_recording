<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MCSTUFFIN's Registered Patients</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <!-- SweetAlert2 -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="../css/dashboard.css" />
  <link rel="stylesheet" href="../css/table.css" />

  <!-- Your custom JS -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="../js/sec_patients.js" defer></script>
</head>
<body>

  <!-- Sidebar -->
  <nav id="sidebar" class="sidebar">
    <div class="d-flex flex-column h-100 p-3">
      <a href="#" class="d-flex align-items-center text-decoration-none mb-3">
        <i class="fas fa-stethoscope me-2 fs-3 text-primary"></i>
        <span class="fs-4 fw-bold text-primary">MCSTUFFIN's</span>
      </a>
      <hr />
      <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item mb-1">
          <a href="secretary_dashboard.html" class="nav-link" data-content="dashboard-content">
            <i class="fas fa-tachometer-alt me-2"></i>
            Dashboard
          </a>
        </li>
        <li class="nav-item mb-1">
          <a href="secretary_patients.html" class="nav-link active" data-content="dashboard-content">
            <i class="fa-solid fa-people-group me-2"></i>
            Registered Patients
          </a>
        </li>
        <li class="nav-item">
          <a href="secretary_medicine.html" class="nav-link" data-content="dashboard-content">
            <i class="fa-solid fa-pills me-2"></i>
            Medicines
          </a>
        </li>
      </ul>
      <hr />
      <div>
        <small class="text-muted d-block text-center">&copy; 2024 MCSTUFFIN's</small>
      </div>
    </div>
  </nav>

  <!-- Offcanvas toggle button for small screens -->
  <button
    class="btn btn-primary d-lg-none offcanvas-toggle-btn"
    type="button"
    data-bs-toggle="offcanvas"
    data-bs-target="#sidebarOffcanvas"
    aria-controls="sidebarOffcanvas"
  >
    <i class="fas fa-bars"></i>
  </button>

  <!-- Offcanvas sidebar for mobile -->
  <div
    class="offcanvas offcanvas-start"
    tabindex="-1"
    id="sidebarOffcanvas"
    aria-labelledby="sidebarOffcanvasLabel"
  >
    <div class="offcanvas-header">
      <h5 class="offcanvas-title text-primary" id="sidebarOffcanvasLabel">MCSTUFFIN's</h5>
      <button
        type="button"
        class="btn-close text-reset"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
      ></button>
    </div>
    <div class="offcanvas-body">
      <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item mb-1">
          <a
            href="secretary_dashboard.html"
            class="nav-link"
            data-bs-dismiss="offcanvas"
          >
            <i class="fas fa-tachometer-alt me-2"></i>Dashboard
          </a>
        </li>
        <li class="nav-item mb-1">
          <a
            href="secretary_patients.html"
            class="nav-link active"
            data-bs-dismiss="offcanvas"
          >
            <i class="fa-solid fa-people-group me-2"></i>Registered Patients
          </a>
        </li>
        <li class="nav-item">
          <a
            href="secretary_medicine.html"
            class="nav-link"
            data-bs-dismiss="offcanvas"
          >
            <i class="fa-solid fa-pills me-2"></i>Medicines
          </a>
        </li>
      </ul>
    </div>
  </div>

  <!-- Main content -->
  <main class="main-content">
    <div
      class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
    >
      <h1 class="h2" id="page-title">Registered Patients</h1>
    </div>

    <div class="mt-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>Patients List</h4>
        <button
          class="btn btn-primary"
          data-bs-toggle="modal"
          data-bs-target="#addPatientModal"
        >
          <i class="fas fa-user-plus me-1"></i> Add Patient
        </button>
      </div>
      <div class="table-responsive">
        <table class="table table-bordered table-hover">
          <thead class="table-light">
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Sex</th>
              <th>Contact Number</th>
              <th>Birthdate</th>
              <th>Address</th>
              <th>Created</th>
              <th>Updated</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="patientTableBody">
            <!-- Populated by JS -->
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <!-- Modals -->

  <!-- Add Patient Modal -->
  <div
    class="modal fade"
    id="addPatientModal"
    tabindex="-1"
    aria-labelledby="addPatientLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <form id="addPatientForm" class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add Patient</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div class="mb-2">
            <label>Name</label>
            <input type="text" name="full_name" class="form-control" required />
          </div>
          <div class="mb-2">
            <label>Email</label>
            <input type="email" name="email" class="form-control" required />
          </div>
          <div class="mb-2">
            <label>Sex</label>
            <select name="sex" class="form-select" required>
              <option value="">Select</option>
              <option>Male</option>
              <option>Female</option>
            </select>
          </div>
          <div class="mb-2">
            <label>Contact Number</label>
            <input type="text" name="contact_num" class="form-control" />
          </div>
          <div class="mb-2">
            <label>Birthdate</label>
            <input type="date" name="birthdate" class="form-control" />
          </div>
          <div class="mb-2">
            <label>Address</label>
            <textarea name="address" class="form-control"></textarea>
          </div>
          <div class="mb-2">
            <label>Password</label>
            <input
              type="password"
              name="password"
              class="form-control"
              required
            />
          </div>
          <div class="mb-2">
            <label>Confirm Password</label>
            <input
              type="password"
              name="confirm_password"
              class="form-control"
              required
            />
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save Patient</button>
        </div>
      </form>
    </div>
  </div>

  <!-- View Patient Modal -->
  <div
    class="modal fade"
    id="viewPatientModal"
    tabindex="-1"
    aria-labelledby="viewPatientLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">View Patient</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body" id="viewPatientContent">
          <!-- Patient details injected here -->
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Patient Modal -->
  <div
    class="modal fade"
    id="editPatientModal"
    tabindex="-1"
    aria-labelledby="editPatientLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <form id="editPatientForm" class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editPatientLabel">Edit Patient</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <input type="hidden" name="patient_id" id="edit_patient_id" />
          <input type="hidden" name="user_id" id="edit_user_id" />

          <div class="mb-2">
            <label for="edit_sex" class="form-label">Sex</label>
            <select name="sex" id="edit_sex" class="form-select" required>
              <option value="">Select</option>
              <option>Male</option>
              <option>Female</option>
            </select>
          </div>
          <div class="mb-2">
            <label for="edit_contact_num" class="form-label">Contact Number</label>
            <input
              type="text"
              name="contact_num"
              id="edit_contact_num"
              class="form-control"
            />
          </div>
          <div class="mb-2">
            <label for="edit_birthdate" class="form-label">Birthdate</label>
            <input
              type="date"
              name="birthdate"
              id="edit_birthdate"
              class="form-control"
            />
          </div>
          <div class="mb-2">
            <label for="edit_address" class="form-label">Address</label>
            <textarea
              name="address"
              id="edit_address"
              class="form-control"
            ></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Bootstrap Bundle JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const sidebarOffcanvas = document.getElementById("sidebarOffcanvas");
      if (sidebarOffcanvas) {
        new bootstrap.Offcanvas(sidebarOffcanvas);
      }
    });
  </script>
</body>
</html>
